{% extends 'base.html' %}
{% block content %}
{% set title = 'Customer Churn Prediction' %}

<section class="prediction-section">
  <h1>ðŸ“± Telecom Customer Churn Prediction</h1>

  <!-- Centered Description -->
  <p class="description-line">
    Predict whether a customer is likely to churn or stay with your service.
  </p>

  <!-- SIM Cards Centered -->
  <div class="sim-selection">
    {% for sim in ['Jio','Airtel','Vi','BSNL'] %}
      <div class="sim-card" onclick="selectSim('{{sim}}')">
        <img src="{{ url_for('static', filename='siva_image/' + sim.lower() + ('.webp' if sim!='Airtel' else '.png')) }}" alt="{{sim}}">
        <p>{{sim}}</p>
      </div>
    {% endfor %}
  </div>

  <!-- Form -->
  <form action="/predict" method="post">
    <input type="hidden" name="sim" id="selectedSim">

    <!-- Section Cards -->
    <div class="card">
      <h3 class="section-title">Customer Information</h3>
      <div class="form-grid">
        <div class="form-group">
          <label>Gender</label>
          <select name="gender" required><option value="">Select</option><option>Male</option><option>Female</option></select>
        </div>
        <div class="form-group">
          <label>Senior Citizen (0 or 1)</label>
          <input type="number" name="SeniorCitizen" min="0" max="1" required>
        </div>
        <div class="form-group">
          <label>Partner</label>
          <select name="Partner"><option>Yes</option><option>No</option></select>
        </div>
        <div class="form-group">
          <label>Dependents</label>
          <select name="Dependents"><option>Yes</option><option>No</option></select>
        </div>
      </div>
    </div>

    <div class="card">
      <h3 class="section-title">Services Subscribed</h3>
      <div class="form-grid">
        <div class="form-group"><label>Phone Service</label><select name="PhoneService"><option>Yes</option><option>No</option></select></div>
        <div class="form-group"><label>Multiple Lines</label><select name="MultipleLines"><option>Yes</option><option>No</option><option>No phone service</option></select></div>
        <div class="form-group"><label>Internet Service</label><select name="InternetService"><option>DSL</option><option>Fiber optic</option><option>No</option></select></div>
        <div class="form-group"><label>Online Security</label><select name="OnlineSecurity"><option>Yes</option><option>No</option><option>No internet service</option></select></div>
        <div class="form-group"><label>Online Backup</label><select name="OnlineBackup"><option>Yes</option><option>No</option><option>No internet service</option></select></div>
        <div class="form-group"><label>Device Protection</label><select name="DeviceProtection"><option>Yes</option><option>No</option><option>No internet service</option></select></div>
        <div class="form-group"><label>Tech Support</label><select name="TechSupport"><option>Yes</option><option>No</option><option>No internet service</option></select></div>
        <div class="form-group"><label>Streaming TV</label><select name="StreamingTV"><option>Yes</option><option>No</option><option>No internet service</option></select></div>
        <div class="form-group"><label>Streaming Movies</label><select name="StreamingMovies"><option>Yes</option><option>No</option><option>No internet service</option></select></div>
      </div>
    </div>

    <div class="card">
      <h3 class="section-title">Billing & Contract</h3>
      <div class="form-grid">
        <div class="form-group"><label>Contract</label><select name="Contract"><option>Month-to-month</option><option>One year</option><option>Two year</option></select></div>
        <div class="form-group"><label>Paperless Billing</label><select name="PaperlessBilling"><option>Yes</option><option>No</option></select></div>
        <div class="form-group"><label>Payment Method</label><select name="PaymentMethod">
          <option>Electronic check</option><option>Mailed check</option>
          <option>Bank transfer (automatic)</option><option>Credit card (automatic)</option>
        </select></div>
      </div>
    </div>

    <div class="card">
      <h3 class="section-title">Tenure & Charges</h3>
      <div class="form-grid">
        <div class="form-group"><label>Tenure (Months)</label><input type="number" name="tenure" min="1" required></div>
        <div class="form-group"><label>Year Stayed</label><input type="number" name="YearStayed" required></div>
        <div class="form-group"><label>Monthly Charges</label><input type="number" step="0.01" name="MonthlyCharges_qt_outl" required></div>
        <div class="form-group"><label>Total Charges</label><input type="number" step="0.01" name="TotalCharges_qt_outl" required></div>
      </div>
    </div>

    <button type="submit" class="btn">Predict Churn</button>
  </form>
</section>

<script>
function selectSim(simName){
  document.getElementById('selectedSim').value = simName;
  document.querySelectorAll('.sim-card').forEach(c=>c.classList.remove('active'));
  const selected = Array.from(document.querySelectorAll('.sim-card')).find(c=>c.innerText.trim()===simName);
  if(selected) selected.classList.add('active');
}
</script>
{% endblock %}
